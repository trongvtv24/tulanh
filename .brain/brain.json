{
    "meta": {
        "schema_version": "1.1.0",
        "awf_version": "4.0.2",
        "created_at": "2026-01-30T00:00:00Z",
        "updated_at": "2026-02-05T14:40:00Z"
    },
    "project": {
        "name": "Tủ Lạnh (Tulanh Online)",
        "type": "Social Learning Platform",
        "status": "production",
        "description": "Mạng xã hội học tập gamified với Supabase backend",
        "repository": "https://github.com/vutrongvtv24-cloud/tulanh"
    },
    "tech_stack": {
        "frontend": {
            "framework": "Next.js 16.1.6 (App Router)",
            "language": "TypeScript",
            "ui_library": "Shadcn/UI + Radix UI",
            "styling": "TailwindCSS 3.4.19",
            "icons": "lucide-react 0.562.0"
        },
        "backend": {
            "framework": "Next.js Server Actions",
            "database": "Supabase (PostgreSQL)",
            "auth": "Supabase Auth",
            "project_id": "uoqyotwurkyjdrawqbpe"
        },
        "database": {
            "type": "PostgreSQL (via Supabase)",
            "orm": "None (Raw SQL / Supabase Client)",
            "region": "Southeast Asia (Singapore)"
        },
        "deployment": {
            "server": "VPS (Ubuntu 24.04 LTS)",
            "ip": "43.228.214.174",
            "port": "3000",
            "process_manager": "PM2 (app name: tulanh)",
            "node_version": "22.22.0",
            "domain": "tulanh.online (pending DNS)"
        },
        "key_packages": {
            "@supabase/supabase-js": "2.94.1",
            "react": "19.2.3",
            "next": "16.1.6",
            "tailwindcss": "3.4.19"
        }
    },
    "database_schema": {
        "summary": "Social learning platform với 21 tables. Users -> Posts, Comments, Communities, Notes, Todos, Badges.",
        "tables": [
            "profiles",
            "posts",
            "comments",
            "likes",
            "follows",
            "communities",
            "community_members",
            "notifications",
            "conversations",
            "direct_messages",
            "badges",
            "user_badges",
            "todos",
            "notes",
            "tags",
            "note_tags",
            "journal_entries",
            "daily_checkins",
            "shares",
            "post_approvals",
            "conversation_participants"
        ],
        "tulanh_tables": [
            {
                "name": "notes",
                "columns": [
                    "id",
                    "user_id",
                    "title",
                    "content",
                    "is_url",
                    "url",
                    "url_title",
                    "url_description",
                    "url_fetched_at",
                    "created_at",
                    "updated_at"
                ],
                "description": "Lưu ghi chú Markdown và URL bookmarks"
            },
            {
                "name": "tags",
                "columns": [
                    "id",
                    "user_id",
                    "name",
                    "slug",
                    "parent_id",
                    "level",
                    "created_at"
                ],
                "description": "Hierarchical tags với parent_id tự tham chiếu"
            },
            {
                "name": "note_tags",
                "columns": [
                    "note_id",
                    "tag_id",
                    "created_at"
                ],
                "description": "Junction table many-to-many giữa notes và tags"
            }
        ],
        "relationships_explained": "Users have Profiles. Users can Follow each other. Posts can be Liked/Commented. Users earn XP and Badges."
    },
    "features": [
        {
            "name": "Auth",
            "status": "Implemented",
            "description": "Supabase Auth + Google OAuth"
        },
        {
            "name": "Gamification",
            "status": "Implemented",
            "description": "XP System, Ranks (1-5), Badges, Daily Check-in, Leaderboards"
        },
        {
            "name": "Community",
            "status": "Implemented",
            "description": "Newsfeed, Posts, Likes, Comments, Topic Filtering"
        },
        {
            "name": "Classes",
            "status": "Implemented",
            "description": "Private communities với admin approval, RLS policies"
        },
        {
            "name": "Tủ Lạnh (Notes)",
            "status": "Implemented",
            "description": "Note-taking với Markdown, URL bookmarking, Hierarchical tags"
        },
        {
            "name": "Productivity Tools",
            "status": "Implemented",
            "description": "Todos, Journal, Pomodoro Timer"
        }
    ],
    "security": {
        "rls_enabled": true,
        "auth_provider": "Supabase Auth",
        "last_audit": "2026-02-05",
        "audit_result": "9.5/10 - No critical issues"
    },
    "knowledge_items": {
        "patterns": [
            "Supabase RLS for security",
            "Next.js Server Components for data fetching",
            "Server Actions for CRUD",
            "Set explicit loading timeout (e.g., 10s) for Auth/API hooks to prevent freezing"
        ],
        "gotchas": [
            "Missing .env.local causes Next.js runtime crashes",
            "Loading spinners must check if data is actually empty to avoid persistent spinners",
            "useSupabaseAuth hook needs try-catch and timeout for robust initialization"
        ]
    }
}